<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: state.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: state.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// 애플리케이션 전역 상태 관리
/**
 * @typedef {Object} Tile
 * @property {string} key - Unique identifier for the tile
 * @property {string} label - Display name of the tile
 * @property {number} originY - Vertical origin point (0-1)
 * @property {number} [displayScale] - Scale factor for display
 * @property {number} [gridWidth] - Width in grid cells
 * @property {number} [gridHeight] - Height in grid cells
 * @property {string} [dataUrl] - Base64 image data for custom tiles
 * @property {string} [url] - URL for built-in tiles
 * @property {string} [file] - File path for built-in tiles
 * @property {boolean} [isCustom] - Whether the tile is user-uploaded
 * @property {boolean} [loaded] - Whether the texture is loaded in Phaser
 * @property {string} [previewUrl] - URL for UI preview
 * @property {string} [runtimeUrl] - URL for Phaser texture
 * @property {boolean} [isSvg] - Whether the tile is an SVG
 */

/**
 * @typedef {Object} State
 * @property {Tile[]} palette - List of all available tiles
 * @property {Tile[]} filteredPalette - List of tiles currently shown in the UI
 * @property {Map&lt;string, Tile>} tileDefinitions - Map of tile keys to tile definitions
 * @property {string|null} activeTileKey - Currently selected tile key
 * @property {Map&lt;string, Object>} placedTiles - Map of placed tiles on the grid
 * @property {Map&lt;string, Phaser.GameObjects.Image>} spriteCache - Map of active Phaser sprites
 * @property {Map&lt;string, string>} runtimeUrls - Map of blob URLs for custom tiles
 * @property {number} currentPage - Current page number in the palette
 * @property {string} searchQuery - Current search query
 * @property {number} selectedGridSize - Currently selected grid size (1 or 2)
 * @property {Phaser.Game|null} game - Phaser game instance
 * @property {Tile[]} builtInTiles - List of built-in tiles loaded from manifest
 */

export const state = {
  // 타일 관련
  palette: [],
  filteredPalette: [],
  tileDefinitions: new Map(),
  activeTileKey: null,

  // 배치 및 캐시
  placedTiles: new Map(),
  spriteCache: new Map(),
  runtimeUrls: new Map(),

  // UI 상태
  currentPage: 0,
  searchQuery: "",
  selectedGridSize: 1,

  // 게임 인스턴스
  game: null,

  // 내장 타일
  builtInTiles: [],
};

/**
 * Updates a value in the global state.
 * @param {string} key - The state key to update
 * @param {any} value - The new value
 */
export function setState(key, value) {
  state[key] = value;
}

/**
 * Retrieves a value from the global state.
 * @param {string} key - The state key to retrieve
 * @returns {any} The value of the state key
 */
export function getState(key) {
  return state[key];
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#Calibrator">Calibrator</a></li><li><a href="global.html#DB_NAME">DB_NAME</a></li><li><a href="global.html#GRID_BUFFER">GRID_BUFFER</a></li><li><a href="global.html#TILES_PER_PAGE">TILES_PER_PAGE</a></li><li><a href="global.html#TILE_HEIGHT">TILE_HEIGHT</a></li><li><a href="global.html#TILE_WIDTH">TILE_WIDTH</a></li><li><a href="global.html#WHEEL_SCROLL_FACTOR">WHEEL_SCROLL_FACTOR</a></li><li><a href="global.html#WORLD_BOUNDS">WORLD_BOUNDS</a></li><li><a href="global.html#addTile">addTile</a></li><li><a href="global.html#addTileWithKey">addTileWithKey</a></li><li><a href="global.html#blobToDataURL">blobToDataURL</a></li><li><a href="global.html#clearAll">clearAll</a></li><li><a href="global.html#createCalibrator">createCalibrator</a></li><li><a href="global.html#createScene">createScene</a></li><li><a href="global.html#createTileStore">createTileStore</a></li><li><a href="global.html#deleteCustomTile">deleteCustomTile</a></li><li><a href="global.html#deletePlacement">deletePlacement</a></li><li><a href="global.html#deletePlacements">deletePlacements</a></li><li><a href="global.html#deleteTile">deleteTile</a></li><li><a href="global.html#diamondPoints">diamondPoints</a></li><li><a href="global.html#diamondPointsScaled">diamondPointsScaled</a></li><li><a href="global.html#drawWireGrid">drawWireGrid</a></li><li><a href="global.html#filterAndRenderPalette">filterAndRenderPalette</a></li><li><a href="global.html#filterPalette">filterPalette</a></li><li><a href="global.html#getPlacementBase">getPlacementBase</a></li><li><a href="global.html#getPlacements">getPlacements</a></li><li><a href="global.html#getState">getState</a></li><li><a href="global.html#getTiles">getTiles</a></li><li><a href="global.html#getVisibleBounds">getVisibleBounds</a></li><li><a href="global.html#gridOrigin">gridOrigin</a></li><li><a href="global.html#gridToScreen">gridToScreen</a></li><li><a href="global.html#init">init</a></li><li><a href="global.html#isWithinBounds">isWithinBounds</a></li><li><a href="global.html#loadImageElement">loadImageElement</a></li><li><a href="global.html#loadSavedPlacements">loadSavedPlacements</a></li><li><a href="global.html#preloadScene">preloadScene</a></li><li><a href="global.html#refreshSceneView">refreshSceneView</a></li><li><a href="global.html#renderPalette">renderPalette</a></li><li><a href="global.html#savePlacement">savePlacement</a></li><li><a href="global.html#savePlacements">savePlacements</a></li><li><a href="global.html#screenToGrid">screenToGrid</a></li><li><a href="global.html#screenToGridFloat">screenToGridFloat</a></li><li><a href="global.html#setActiveTile">setActiveTile</a></li><li><a href="global.html#setState">setState</a></li><li><a href="global.html#setupGridSizeToggle">setupGridSizeToggle</a></li><li><a href="global.html#setupPalette">setupPalette</a></li><li><a href="global.html#setupSearch">setupSearch</a></li><li><a href="global.html#startGame">startGame</a></li><li><a href="global.html#syncVisibleTiles">syncVisibleTiles</a></li><li><a href="global.html#updateDepths">updateDepths</a></li><li><a href="global.html#updatePaginationButtons">updatePaginationButtons</a></li><li><a href="global.html#updateScene">updateScene</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Fri Nov 21 2025 23:40:45 GMT+0900 (Korean Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
